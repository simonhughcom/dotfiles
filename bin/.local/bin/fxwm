#!/bin/sh

# FXWM
# Simon Hugh Moore
#
# Lists all windows in current desktop in fzf.
# Chosen window is focused.
# Use -a to list all windows.

_window(){
    windows="$( wmctrl -l -pG )"

    if [ "$1" = "-c" ]; then
        current_desktop="$( wmctrl -d | grep '*' | cut -d' ' -f1 )"
        windows="$( echo "$windows" | grep "^0x[^ ]*[[:space:]][[:space:]]*$current_desktop[[:space:]].*$" )"
    fi

    choice="$( echo "$windows" | fzf --with-nth=9.. )"

    wmctrl -ia "$choice"
}

_desktop(){
    choice="$( wmctrl -d | fzf --with-nth=9 )"
    wmctrl -s "$choice"
}

_monitor(){
    xrandr --listmonitors
}

case "$1" in
    window) shift; _window "$@" ;;
    desktop) shift; _desktop "$@" ;;
    monitor) shift; _monitor "$@" ;;
esac
