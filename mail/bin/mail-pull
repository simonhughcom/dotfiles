#!/bin/sh

# MAIL-PULL
# Simon Hugh Moore
#
# Pull and tag mail from server.

# Pull all mail
mbsync -c "$XDG_CONFIG_HOME"/mbsync/mbsyncrc -a

# Not much
notmuch new

# retag all new messages as inbox and unread
notmuch tag -new +inbox +unread -- tag:new

me="*@simonhugh.xyz OR simonhugh@mailbox.org OR simon.h.moore94@gmail.com"

# tag all messages from "me" as sent and remove inbox,unread tags unless addressed to me.
notmuch tag -new -unread -inbox +sent -- from:"$me" AND NOT to:"$me"
