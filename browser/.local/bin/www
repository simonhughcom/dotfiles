#!/bin/sh

# WWW
# Simon Hugh Moore
#
# Wrapper for firefox setting up all the correct profiles.

# Location of profiles to manage.
profiles=~/projects/firefox-profiles

# Path where firefox stores its profiles.
firefox_profiles=~/.mozilla/firefox

_firefox(){ 
    # Run firefox always in new window with timezone set to UTC.
    TZ=UTC firefox --new-window $@
}

_save_firefox_profiles() { rsync -r --exclude-from "$profiles/.rsync_ignore" "$firefox_profiles/" "$profiles"; }
_load_firefox_profiles() { rsync -r --exclude-from "$profiles/.rsync_ignore" "$profiles/" "$firefox_profiles"; }

case $1 in
    -f|firefox) _firefox $@ ;;
    -s|save) _save_firefox_profiles ;;
    -l|load) _load_firefox_profiles ;;
    *) _firefox $@ ;;
esac
