" Tridactyl config
"
" Simon H Moore
"
" Required tridactly-native to be installed.
" Run `installnative` in tridactyl.

" Remove any existing settings.
sanitize tridactyllocal tridactylsync

"
" Alias
"
alias mpv js -p tri.excmds.shellescape(JS_ARG).then(url => tri.excmds.exclaim_quiet('mpv ' + url))


"
" Settings
"

" Color theme to use for menu
colors dark

" Auto create containers 
" auconscreatecontainer true

" Characters to use for hints
" set hintchars hjklasdfgyuiopqwertnmzxcb
set hintchars hjklgftyuvbiondsrcm

" Editor
set editorcmd xst -e nvim -S $HOME/.config/nvim/after/ftplugin/tridactyl.vim

" Always open in new window
autocmd DocStart .* tabdetach

" Zoom levels
autocmd DocStart .* zoom 170
autocmd DocStart .*youtube\.com.* zoom 180
autocmd DocStart .*startpage\.com.* zoom 220
autocmd DocStart .*duckduckgo\.com.* zoom 200
autocmd DocStart .*github\.com.* zoom 200
autocmd DocStart .*gitlab\.com.* zoom 150
autocmd DocStart .*archlinux\.org.* zoom 200
autocmd DocStart .*amazon\.co\.uk.* zoom 150
autocmd DocStart .*wikipedia\.org.* zoom 200

"
" Bind Keys
"

" Close windows and tabs
bind q winclose
bind Q tabclose

" Find
bind / fillcmdline find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1

" Mute
bind m mute toggle
bind M mute all toggle

" Follow link
bind f hint -w
unbind t
bind t hint

" Optomize follow link for URL's.
bindurl youtube.com f hint -Jw
bindurl youtube.com t hint -J

" Yank with hint
bind Y hint -y

" Run mpv on links
bind v hint -JW mpv
" On youtube
bindurl youtube.com v composite hint -Jpipe ytd-thumbnail>a href | mpv

" Run mpv on current URL
bind V composite get_current_url | mpv

" Git{Hub,Lab} git clone via SSH yank
bind yg composite js "git clone " + document.location.href.replace(/https?:\/\//,"git@").replace("/",":").replace(/$/,".git") | clipboard yank

" Autocontain
" autocontain google\.(co\.uk|com) google
" autocontain gmail.com google
